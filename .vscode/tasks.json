{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "ğŸ”¨ Build: LiveContainer Dylib",
            "type": "shell",
            "command": "make -f Makefile.livecontainer clean && make -f Makefile.livecontainer FINALPACKAGE=1 && echo '' && echo 'âœ… Build complete!' && echo 'ğŸ“ arm64: .theos/obj/arm64/libDeviceIDSpoofer.dylib' && echo 'ğŸ“ arm64e: .theos/obj/arm64e/libDeviceIDSpoofer.dylib' && ls -lh .theos/obj/arm64/libDeviceIDSpoofer.dylib .theos/obj/arm64e/libDeviceIDSpoofer.dylib 2>/dev/null || true",
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "presentation": {
                "reveal": "always",
                "panel": "new",
                "clear": true
            },
            "problemMatcher": [
                "$gcc"
            ]
        },
        {
            "label": "ğŸ“¦ Build: Jailbreak Tweak (.deb)",
            "type": "shell",
            "command": "make clean package && echo '' && echo 'âœ… Package built!' && ls -lh packages/*.deb",
            "group": "build",
            "presentation": {
                "reveal": "always",
                "panel": "new",
                "clear": true
            },
            "problemMatcher": [
                "$gcc"
            ]
        },
        {
            "label": "ğŸš€ Build & Copy: LiveContainer (Output)",
            "type": "shell",
            "command": "make -f Makefile.livecontainer clean && make -f Makefile.livecontainer FINALPACKAGE=1 && mkdir -p output && echo '' && echo 'ğŸ“¦ Copying files...' && cp .theos/obj/arm64/libDeviceIDSpoofer.dylib output/libDeviceIDSpoofer-arm64.dylib && cp .theos/obj/arm64e/libDeviceIDSpoofer.dylib output/libDeviceIDSpoofer-arm64e.dylib && lipo -create .theos/obj/arm64/libDeviceIDSpoofer.dylib .theos/obj/arm64e/libDeviceIDSpoofer.dylib -output output/libDeviceIDSpoofer.dylib && strip -x output/libDeviceIDSpoofer.dylib && echo 'âœ… Files copied and stripped!' && echo '' && ls -lh output/",
            "group": "build",
            "presentation": {
                "reveal": "always",
                "panel": "new",
                "clear": true
            },
            "problemMatcher": [
                "$gcc"
            ]
        },
        {
            "label": "ğŸ“¦ Build & Copy: Jailbreak (.deb to Output)",
            "type": "shell",
            "command": "make clean package && mkdir -p output && cp packages/*.deb output/ && echo 'âœ… Package copied to output/' && ls -lh output/",
            "group": "build",
            "presentation": {
                "reveal": "always",
                "panel": "new",
                "clear": true
            },
            "problemMatcher": [
                "$gcc"
            ]
        },
        {
            "label": "ğŸ§¹ Clean: All Build Artifacts",
            "type": "shell",
            "command": "make clean && make -f Makefile.livecontainer clean && rm -rf output && echo 'âœ… Clean complete'",
            "group": "build",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            }
        },
        {
            "label": "ğŸ” Info: Show Dylib Details",
            "type": "shell",
            "command": "echo 'ğŸ“Š Dylib Information:' && echo '' && echo 'arm64:' && file .theos/obj/arm64/libDeviceIDSpoofer.dylib 2>/dev/null && ls -lh .theos/obj/arm64/libDeviceIDSpoofer.dylib 2>/dev/null && echo '' && echo 'arm64e:' && file .theos/obj/arm64e/libDeviceIDSpoofer.dylib 2>/dev/null && ls -lh .theos/obj/arm64e/libDeviceIDSpoofer.dylib 2>/dev/null && echo '' && echo 'Dependencies:' && otool -L .theos/obj/arm64/libDeviceIDSpoofer.dylib 2>/dev/null || echo 'âš ï¸  Build the dylib first!'",
            "group": "test",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            }
        },
        {
            "label": "ğŸ“¤ Deploy: Copy to Device (SSH)",
            "type": "shell",
            "command": "echo 'Enter device IP:' && read DEVICE_IP && scp .theos/obj/arm64/libDeviceIDSpoofer.dylib root@$DEVICE_IP:/var/root/ && echo 'âœ… Dylib copied to device at /var/root/'",
            "group": "test",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            }
        },
        {
            "label": "ğŸ¯ Build All: Dylib + Tweak",
            "type": "shell",
            "command": "echo 'ğŸ”¨ Step 1/4: Building LiveContainer Dylib...' && make -f Makefile.livecontainer clean && make -f Makefile.livecontainer FINALPACKAGE=1 && echo '' && echo 'ğŸ“¦ Step 2/4: Copying dylib to output...' && mkdir -p output && cp .theos/obj/arm64/libDeviceIDSpoofer.dylib output/libDeviceIDSpoofer-arm64.dylib && cp .theos/obj/arm64e/libDeviceIDSpoofer.dylib output/libDeviceIDSpoofer-arm64e.dylib && lipo -create .theos/obj/arm64/libDeviceIDSpoofer.dylib .theos/obj/arm64e/libDeviceIDSpoofer.dylib -output output/libDeviceIDSpoofer.dylib && strip -x output/libDeviceIDSpoofer.dylib && echo 'âœ… Dylib copied!' && echo '' && echo 'ğŸ”¨ Step 3/4: Building Jailbreak Tweak...' && make clean package && echo '' && echo 'ğŸ“¦ Step 4/4: Copying .deb package...' && cp packages/*.deb output/ && echo '' && echo 'âœ… All builds complete! Files in output/' && echo '' && ls -lh output/",
            "group": "build",
            "presentation": {
                "reveal": "always",
                "panel": "new",
                "clear": true
            },
            "problemMatcher": [
                "$gcc"
            ]
        },
        {
            "label": "âš¡ Quick Build: LiveContainer (No Clean)",
            "type": "shell",
            "command": "make -f Makefile.livecontainer FINALPACKAGE=1 && echo '' && ls -lh .theos/obj/arm64/libDeviceIDSpoofer.dylib",
            "group": "build",
            "presentation": {
                "reveal": "always",
                "panel": "shared"
            },
            "problemMatcher": [
                "$gcc"
            ]
        },
        {
            "label": "ğŸ”§ Debug: Build with Symbols",
            "type": "shell",
            "command": "make -f Makefile.livecontainer clean && make -f Makefile.livecontainer DEBUG=1 && echo '' && ls -lh .theos/obj/arm64/libDeviceIDSpoofer.dylib",
            "group": "build",
            "presentation": {
                "reveal": "always",
                "panel": "new",
                "clear": true
            },
            "problemMatcher": [
                "$gcc"
            ]
        },
        {
            "label": "ğŸ“‹ Copy: Output to Desktop",
            "type": "shell",
            "command": "mkdir -p ~/Desktop/DeviceIDSpoofer && cp output/* ~/Desktop/DeviceIDSpoofer/ 2>/dev/null && echo 'âœ… Files copied to Desktop/DeviceIDSpoofer/' && ls -lh ~/Desktop/DeviceIDSpoofer/ || echo 'âš ï¸  No files in output/ folder. Run Build & Copy task first!'",
            "group": "test",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            }
        },
        {
            "label": "ğŸ“Š Analyze: Dylib Size Comparison",
            "type": "shell",
            "command": "echo 'ğŸ“Š Size Analysis:' && echo '' && echo 'Original arm64:' && ls -lh .theos/obj/arm64/libDeviceIDSpoofer.dylib 2>/dev/null || echo 'Not built yet' && echo '' && echo 'Original arm64e:' && ls -lh .theos/obj/arm64e/libDeviceIDSpoofer.dylib 2>/dev/null || echo 'Not built yet' && echo '' && echo 'Stripped Universal (output):' && ls -lh output/libDeviceIDSpoofer.dylib 2>/dev/null || echo 'Not copied yet' && echo '' && echo 'Architectures:' && lipo -info .theos/obj/arm64/libDeviceIDSpoofer.dylib 2>/dev/null && lipo -info .theos/obj/arm64e/libDeviceIDSpoofer.dylib 2>/dev/null || echo 'Not built yet'",
            "group": "test",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            }
        },
        {
            "label": "ğŸ” Sign: Code Sign Dylib",
            "type": "shell",
            "command": "codesign -s - -f .theos/obj/arm64/libDeviceIDSpoofer.dylib && echo 'âœ… arm64 dylib signed' && codesign -s - -f .theos/obj/arm64e/libDeviceIDSpoofer.dylib && echo 'âœ… arm64e dylib signed' && codesign -dv .theos/obj/arm64/libDeviceIDSpoofer.dylib",
            "group": "test",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            }
        },
        {
            "label": "ğŸ“ Open: Output Folder",
            "type": "shell",
            "command": "mkdir -p output && open output",
            "group": "test",
            "presentation": {
                "reveal": "silent"
            },
            "osx": {
                "command": "mkdir -p output && open output"
            },
            "linux": {
                "command": "mkdir -p output && xdg-open output"
            }
        },
        {
            "label": "ğŸ“ Open: Build Folder (.theos)",
            "type": "shell",
            "command": "open .theos/obj/",
            "group": "test",
            "presentation": {
                "reveal": "silent"
            },
            "osx": {
                "command": "open .theos/obj/"
            },
            "linux": {
                "command": "xdg-open .theos/obj/"
            }
        },
        {
            "label": "ğŸ¬ Watch: Auto-rebuild on File Change",
            "type": "shell",
            "command": "while true; do fswatch -1 *.x *.m *.h && echo 'ğŸ”„ File changed, rebuilding...' && make -f Makefile.livecontainer FINALPACKAGE=1 && echo 'âœ… Build complete at' && date; done",
            "isBackground": true,
            "presentation": {
                "reveal": "always",
                "panel": "dedicated"
            },
            "problemMatcher": [
                "$gcc"
            ]
        }
    ]
}
