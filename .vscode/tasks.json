{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "üî® Build: LiveContainer Dylib",
            "type": "shell",
            "command": "make -f Makefile.livecontainer clean && make -f Makefile.livecontainer FINALPACKAGE=1 && echo '' && echo '‚úÖ Build complete!' && echo '' && echo 'üìÅ Universal binary:' && ls -lh .theos/obj/DeviceIDSpoofer.dylib && echo '' && echo 'üìÅ arm64:' && ls -lh .theos/obj/arm64/DeviceIDSpoofer.dylib && echo '' && echo 'üìÅ arm64e:' && ls -lh .theos/obj/arm64e/DeviceIDSpoofer.dylib && echo '' && lipo -info .theos/obj/DeviceIDSpoofer.dylib",
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "presentation": {
                "reveal": "always",
                "panel": "new",
                "clear": true
            },
            "problemMatcher": [
                "$gcc"
            ]
        },
        {
            "label": "üì¶ Build: Jailbreak Tweak (.deb)",
            "type": "shell",
            "command": "make clean package && echo '' && echo '‚úÖ Package built!' && ls -lh packages/*.deb",
            "group": "build",
            "presentation": {
                "reveal": "always",
                "panel": "new",
                "clear": true
            },
            "problemMatcher": [
                "$gcc"
            ]
        },
        {
            "label": "üöÄ Build & Copy: LiveContainer (Output)",
            "type": "shell",
            "command": "make -f Makefile.livecontainer clean && make -f Makefile.livecontainer FINALPACKAGE=1 && mkdir -p output && echo '' && echo 'üì¶ Copying files to output/...' && cp .theos/obj/DeviceIDSpoofer.dylib output/DeviceIDSpoofer.dylib && cp .theos/obj/arm64/DeviceIDSpoofer.dylib output/DeviceIDSpoofer-arm64.dylib && cp .theos/obj/arm64e/DeviceIDSpoofer.dylib output/DeviceIDSpoofer-arm64e.dylib && strip -x output/DeviceIDSpoofer.dylib && echo '‚úÖ Files copied and stripped!' && echo '' && ls -lh output/ && echo '' && echo 'üîç Architecture info:' && lipo -info output/DeviceIDSpoofer*.dylib",
            "group": "build",
            "presentation": {
                "reveal": "always",
                "panel": "new",
                "clear": true
            },
            "problemMatcher": [
                "$gcc"
            ]
        },
        {
            "label": "üì¶ Build & Copy: Jailbreak (.deb to Output)",
            "type": "shell",
            "command": "make clean package && mkdir -p output && cp packages/*.deb output/ && echo '‚úÖ Package copied to output/' && ls -lh output/",
            "group": "build",
            "presentation": {
                "reveal": "always",
                "panel": "new",
                "clear": true
            },
            "problemMatcher": [
                "$gcc"
            ]
        },
        {
            "label": "üßπ Clean: All Build Artifacts",
            "type": "shell",
            "command": "make clean && make -f Makefile.livecontainer clean && rm -rf output && echo '‚úÖ Clean complete'",
            "group": "build",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            }
        },
        {
            "label": "üîç Info: Find All Dylibs",
            "type": "shell",
            "command": "echo 'üîç All dylib files in .theos/:' && echo '' && find .theos -name '*.dylib' -type f | grep -v dSYM | while read f; do echo \"üìÅ $f\"; ls -lh \"$f\"; lipo -info \"$f\" 2>/dev/null; echo \"\"; done || echo '‚ö†Ô∏è  No dylib files found. Build first!'",
            "group": "test",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            }
        },
        {
            "label": "üîç Info: Show Dylib Details",
            "type": "shell",
            "command": "echo 'üìä Dylib Information:' && echo '' && echo 'Universal Binary:' && ls -lh .theos/obj/DeviceIDSpoofer.dylib 2>/dev/null && lipo -info .theos/obj/DeviceIDSpoofer.dylib 2>/dev/null && echo '' && echo 'arm64:' && ls -lh .theos/obj/arm64/DeviceIDSpoofer.dylib 2>/dev/null && file .theos/obj/arm64/DeviceIDSpoofer.dylib 2>/dev/null && echo '' && echo 'arm64e:' && ls -lh .theos/obj/arm64e/DeviceIDSpoofer.dylib 2>/dev/null && file .theos/obj/arm64e/DeviceIDSpoofer.dylib 2>/dev/null && echo '' && echo 'Dependencies:' && otool -L .theos/obj/DeviceIDSpoofer.dylib 2>/dev/null || echo '‚ö†Ô∏è  Build the dylib first!'",
            "group": "test",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            }
        },
        {
            "label": "üì§ Deploy: Copy to Device (SSH)",
            "type": "shell",
            "command": "echo 'Enter device IP:' && read DEVICE_IP && scp .theos/obj/DeviceIDSpoofer.dylib root@$DEVICE_IP:/var/root/ && echo '‚úÖ Dylib copied to device at /var/root/'",
            "group": "test",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            }
        },
        {
            "label": "üéØ Build All: Dylib + Tweak",
            "type": "shell",
            "command": "echo 'üî® Step 1/4: Building LiveContainer Dylib...' && make -f Makefile.livecontainer clean && make -f Makefile.livecontainer FINALPACKAGE=1 && echo '' && echo 'üì¶ Step 2/4: Copying dylib to output...' && mkdir -p output && cp .theos/obj/DeviceIDSpoofer.dylib output/DeviceIDSpoofer.dylib && cp .theos/obj/arm64/DeviceIDSpoofer.dylib output/DeviceIDSpoofer-arm64.dylib && cp .theos/obj/arm64e/DeviceIDSpoofer.dylib output/DeviceIDSpoofer-arm64e.dylib && strip -x output/DeviceIDSpoofer.dylib && echo '‚úÖ Dylib copied!' && echo '' && echo 'üî® Step 3/4: Building Jailbreak Tweak...' && make clean package && echo '' && echo 'üì¶ Step 4/4: Copying .deb package...' && cp packages/*.deb output/ && echo '' && echo '‚úÖ All builds complete! Files in output/' && echo '' && ls -lh output/ && echo '' && lipo -info output/DeviceIDSpoofer*.dylib",
            "group": "build",
            "presentation": {
                "reveal": "always",
                "panel": "new",
                "clear": true
            },
            "problemMatcher": [
                "$gcc"
            ]
        },
        {
            "label": "‚ö° Quick Build: LiveContainer (No Clean)",
            "type": "shell",
            "command": "make -f Makefile.livecontainer FINALPACKAGE=1 && echo '' && ls -lh .theos/obj/DeviceIDSpoofer.dylib",
            "group": "build",
            "presentation": {
                "reveal": "always",
                "panel": "shared"
            },
            "problemMatcher": [
                "$gcc"
            ]
        },
        {
            "label": "üîß Debug: Build with Symbols",
            "type": "shell",
            "command": "make -f Makefile.livecontainer clean && make -f Makefile.livecontainer DEBUG=1 && echo '' && ls -lh .theos/obj/DeviceIDSpoofer.dylib && echo '' && ls -lh .theos/obj/arm64/DeviceIDSpoofer.dylib.dSYM",
            "group": "build",
            "presentation": {
                "reveal": "always",
                "panel": "new",
                "clear": true
            },
            "problemMatcher": [
                "$gcc"
            ]
        },
        {
            "label": "üìã Copy: Output to Desktop",
            "type": "shell",
            "command": "mkdir -p ~/Desktop/DeviceIDSpoofer && cp output/* ~/Desktop/DeviceIDSpoofer/ 2>/dev/null && echo '‚úÖ Files copied to Desktop/DeviceIDSpoofer/' && ls -lh ~/Desktop/DeviceIDSpoofer/ || echo '‚ö†Ô∏è  No files in output/ folder. Run Build & Copy task first!'",
            "group": "test",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            }
        },
        {
            "label": "üìä Analyze: Dylib Size Comparison",
            "type": "shell",
            "command": "echo 'üìä Size Analysis:' && echo '' && echo 'Universal binary (.theos/obj):' && ls -lh .theos/obj/DeviceIDSpoofer.dylib 2>/dev/null && lipo -info .theos/obj/DeviceIDSpoofer.dylib 2>/dev/null && echo '' && echo 'arm64 only:' && ls -lh .theos/obj/arm64/DeviceIDSpoofer.dylib 2>/dev/null && echo '' && echo 'arm64e only:' && ls -lh .theos/obj/arm64e/DeviceIDSpoofer.dylib 2>/dev/null && echo '' && echo 'Stripped universal (output):' && ls -lh output/DeviceIDSpoofer.dylib 2>/dev/null && lipo -info output/DeviceIDSpoofer.dylib 2>/dev/null || echo '‚ö†Ô∏è  Build first, then run Build & Copy task'",
            "group": "test",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            }
        },
        {
            "label": "üîê Sign: Code Sign Dylib",
            "type": "shell",
            "command": "codesign -s - -f .theos/obj/DeviceIDSpoofer.dylib && echo '‚úÖ Universal dylib signed' && codesign -dv .theos/obj/DeviceIDSpoofer.dylib",
            "group": "test",
            "presentation": {
                "reveal": "always",
                "panel": "new"
            }
        },
        {
            "label": "üìÅ Open: Output Folder",
            "type": "shell",
            "command": "mkdir -p output && open output",
            "group": "test",
            "presentation": {
                "reveal": "silent"
            },
            "osx": {
                "command": "mkdir -p output && open output"
            },
            "linux": {
                "command": "mkdir -p output && xdg-open output"
            }
        },
        {
            "label": "üìÅ Open: Build Folder (.theos)",
            "type": "shell",
            "command": "open .theos/obj/",
            "group": "test",
            "presentation": {
                "reveal": "silent"
            },
            "osx": {
                "command": "open .theos/obj/"
            },
            "linux": {
                "command": "xdg-open .theos/obj/"
            }
        },
        {
            "label": "üé¨ Watch: Auto-rebuild on File Change",
            "type": "shell",
            "command": "while true; do fswatch -1 *.x *.m *.h && echo 'üîÑ File changed, rebuilding...' && make -f Makefile.livecontainer FINALPACKAGE=1 && echo '‚úÖ Build complete at' && date && ls -lh .theos/obj/DeviceIDSpoofer.dylib; done",
            "isBackground": true,
            "presentation": {
                "reveal": "always",
                "panel": "dedicated"
            },
            "problemMatcher": [
                "$gcc"
            ]
        }
    ]
}
